[pytest]
pythonpath = .
testpaths = tests
asyncio_mode = auto
markers =
    slow: marks tests as slow (deselect with '-m "not slow"')
    benchmark: marks tests as benchmarks (deselect with '-m "not benchmark"')

# Filter known harmless warnings
filterwarnings =
    # Suppress asyncpg internal cleanup warning during pytest shutdown
    # This is a known issue: https://github.com/sqlalchemy/sqlalchemy/issues/8145
    # The connection cleanup happens correctly, but asyncpg logs the warning anyway
    ignore:coroutine 'Connection._cancel' was never awaited:RuntimeWarning