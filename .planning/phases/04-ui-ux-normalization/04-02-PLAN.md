---
phase: 04-ui-ux-normalization
plan: 02
type: execute
wave: 1
depends_on: []
files_modified:
  - frontend/src/components/common/PageHeader.vue
autonomous: true

must_haves:
  truths:
    - "PageHeader provides consistent page title structure across views"
    - "PageHeader uses semantic HTML (<header> element with <h1>)"
    - "PageHeader supports breadcrumbs, title, subtitle, icon, and actions"
    - "PageHeader has hero variant for detail pages"
  artifacts:
    - path: "frontend/src/components/common/PageHeader.vue"
      provides: "Reusable page header component"
      min_lines: 80
      contains: "<header"
  key_links:
    - from: "frontend/src/components/common/PageHeader.vue"
      to: "Vuetify components"
      via: "v-container, v-breadcrumbs, v-btn, v-icon"
      pattern: "v-container|v-breadcrumbs|v-btn|v-icon"
---

<objective>
Create reusable PageHeader.vue component for consistent page headers.

Purpose: Standardize page header structure across all views with semantic HTML, accessibility support, and flexible variants (default, hero, compact).

Output: PageHeader.vue component with props for title, subtitle, breadcrumbs, icon, and slots for actions and prepend content.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/04-ui-ux-normalization/04-CONTEXT.md
@.planning/phases/04-ui-ux-normalization/04-RESEARCH.md
@frontend/src/views/PagePhenopacket.vue
@frontend/src/views/Home.vue
@frontend/src/views/Phenopackets.vue
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create PageHeader.vue component</name>
  <files>frontend/src/components/common/PageHeader.vue</files>
  <action>
Create `frontend/src/components/common/PageHeader.vue` with the following structure:

**Template:**
```vue
<template>
  <header class="page-header" :class="headerClasses">
    <v-container :fluid="fluid">
      <!-- Breadcrumbs (if provided) -->
      <nav v-if="breadcrumbs?.length" aria-label="Breadcrumb">
        <v-breadcrumbs :items="breadcrumbs" density="compact" class="pa-0 mb-2" />
      </nav>

      <!-- Title Row -->
      <div class="d-flex align-center flex-wrap gap-3">
        <!-- Back button (optional) -->
        <v-btn
          v-if="showBack"
          icon="mdi-arrow-left"
          variant="text"
          size="small"
          aria-label="Go back"
          @click="$emit('back')"
        />

        <!-- Icon (optional) -->
        <v-icon v-if="icon" :color="iconColor" size="large" aria-hidden="true">
          {{ icon }}
        </v-icon>

        <!-- Title + Subtitle -->
        <div class="flex-grow-1">
          <h1 class="text-h5 font-weight-bold" :class="titleClass">
            {{ title }}
          </h1>
          <p v-if="subtitle" class="text-body-2 text-medium-emphasis mb-0">
            {{ subtitle }}
          </p>
        </div>

        <!-- Prepend slot (for badges/chips next to title) -->
        <slot name="prepend" />

        <!-- Actions slot -->
        <div v-if="$slots.actions" class="d-flex align-center gap-2">
          <slot name="actions" />
        </div>
      </div>
    </v-container>
  </header>
</template>
```

**Script (Options API per project convention):**
```javascript
export default {
  name: 'PageHeader',
  props: {
    title: { type: String, required: true },
    subtitle: { type: String, default: '' },
    icon: { type: String, default: '' },
    iconColor: { type: String, default: 'teal-darken-2' },
    breadcrumbs: { type: Array, default: () => [] },
    showBack: { type: Boolean, default: false },
    variant: {
      type: String,
      default: 'default',
      validator: (v) => ['default', 'hero', 'compact'].includes(v),
    },
    fluid: { type: Boolean, default: true },
    titleClass: { type: String, default: 'text-teal-darken-2' },
  },
  emits: ['back'],
  computed: {
    headerClasses() {
      return {
        'page-header--hero': this.variant === 'hero',
        'page-header--compact': this.variant === 'compact',
      };
    },
  },
};
```

**Scoped Styles:**
```css
.page-header {
  padding: 16px 0;
  border-bottom: 1px solid rgba(0, 0, 0, 0.05);
}

.page-header--hero {
  padding: 24px 0;
  background: linear-gradient(135deg, #e0f2f1 0%, #b2dfdb 50%, #f5f7fa 100%);
}

.page-header--compact {
  padding: 8px 0;
}
```

**Notes:**
- Use Options API (not Composition API) per existing codebase convention
- `<header>` element for semantic HTML
- `<h1>` for page title (screen reader compatible)
- `aria-label="Breadcrumb"` for navigation element
- `aria-label="Go back"` for back button
- `aria-hidden="true"` on decorative icon
  </action>
  <verify>
    File exists at frontend/src/components/common/PageHeader.vue
    `grep "<header" frontend/src/components/common/PageHeader.vue` finds semantic header
    `grep "<h1" frontend/src/components/common/PageHeader.vue` finds h1 element
    `grep "aria-label" frontend/src/components/common/PageHeader.vue` finds accessibility attributes
    `cd frontend && npm run build 2>&1 | head -20` compiles without errors
  </verify>
  <done>
    PageHeader.vue created with semantic HTML, accessibility attributes, and three variants
  </done>
</task>

<task type="auto">
  <name>Task 2: Create unit tests for PageHeader</name>
  <files>frontend/tests/components/PageHeader.test.js</files>
  <action>
Create `frontend/tests/components/PageHeader.test.js` with comprehensive tests:

```javascript
import { describe, it, expect } from 'vitest';
import { mount } from '@vue/test-utils';
import { createVuetify } from 'vuetify';
import * as components from 'vuetify/components';
import * as directives from 'vuetify/directives';
import PageHeader from '@/components/common/PageHeader.vue';

const vuetify = createVuetify({ components, directives });

function mountPageHeader(props = {}, slots = {}) {
  return mount(PageHeader, {
    props: { title: 'Test Title', ...props },
    slots,
    global: {
      plugins: [vuetify],
    },
  });
}

describe('PageHeader', () => {
  it('renders title in h1 element', () => {
    const wrapper = mountPageHeader({ title: 'My Page Title' });
    expect(wrapper.find('h1').text()).toBe('My Page Title');
  });

  it('renders semantic header element', () => {
    const wrapper = mountPageHeader();
    expect(wrapper.find('header.page-header').exists()).toBe(true);
  });

  it('renders subtitle when provided', () => {
    const wrapper = mountPageHeader({ subtitle: 'Page description' });
    expect(wrapper.find('p').text()).toBe('Page description');
  });

  it('does not render subtitle when not provided', () => {
    const wrapper = mountPageHeader({ subtitle: '' });
    expect(wrapper.find('p').exists()).toBe(false);
  });

  it('renders icon when provided', () => {
    const wrapper = mountPageHeader({ icon: 'mdi-account' });
    expect(wrapper.find('.v-icon').exists()).toBe(true);
  });

  it('renders breadcrumbs when provided', () => {
    const breadcrumbs = [
      { title: 'Home', to: '/' },
      { title: 'Page', disabled: true },
    ];
    const wrapper = mountPageHeader({ breadcrumbs });
    expect(wrapper.find('nav[aria-label="Breadcrumb"]').exists()).toBe(true);
  });

  it('does not render breadcrumbs when empty', () => {
    const wrapper = mountPageHeader({ breadcrumbs: [] });
    expect(wrapper.find('nav').exists()).toBe(false);
  });

  it('renders back button when showBack is true', () => {
    const wrapper = mountPageHeader({ showBack: true });
    expect(wrapper.find('button[aria-label="Go back"]').exists()).toBe(true);
  });

  it('emits back event when back button clicked', async () => {
    const wrapper = mountPageHeader({ showBack: true });
    await wrapper.find('button[aria-label="Go back"]').trigger('click');
    expect(wrapper.emitted('back')).toHaveLength(1);
  });

  it('applies hero variant class', () => {
    const wrapper = mountPageHeader({ variant: 'hero' });
    expect(wrapper.find('.page-header--hero').exists()).toBe(true);
  });

  it('applies compact variant class', () => {
    const wrapper = mountPageHeader({ variant: 'compact' });
    expect(wrapper.find('.page-header--compact').exists()).toBe(true);
  });

  it('renders actions slot content', () => {
    const wrapper = mountPageHeader({}, { actions: '<button>Action</button>' });
    expect(wrapper.find('button').text()).toBe('Action');
  });

  it('renders prepend slot content', () => {
    const wrapper = mountPageHeader({}, { prepend: '<span class="badge">New</span>' });
    expect(wrapper.find('.badge').exists()).toBe(true);
  });
});
```
  </action>
  <verify>
    File exists at frontend/tests/components/PageHeader.test.js
    `cd frontend && npm test -- tests/components/PageHeader.test.js 2>&1 | grep -E "(PASS|FAIL|Tests:)"` shows tests passing
  </verify>
  <done>
    Unit tests pass for PageHeader component covering all props, slots, and variants
  </done>
</task>

</tasks>

<verification>
1. PageHeader.vue file exists in frontend/src/components/common/
2. Component uses semantic HTML (<header>, <h1>, aria attributes)
3. All 13+ unit tests pass
4. Frontend builds without errors: `cd frontend && npm run build`
5. Frontend tests pass: `cd frontend && npm test`
</verification>

<success_criteria>
- PageHeader.vue created with semantic <header> and <h1> elements
- Props: title (required), subtitle, icon, iconColor, breadcrumbs, showBack, variant, fluid, titleClass
- Slots: prepend, actions
- Emits: back
- Three variants: default, hero, compact
- Accessibility: aria-label on nav and back button, aria-hidden on decorative icon
- Unit tests cover all props, slots, emits, and variants
</success_criteria>

<output>
After completion, create `.planning/phases/04-ui-ux-normalization/04-02-SUMMARY.md`
</output>
